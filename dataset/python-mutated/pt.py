"""Portuguese search language: includes the JS Portuguese stemmer."""
from __future__ import annotations
from typing import TYPE_CHECKING, Dict
import snowballstemmer
from sphinx.search import SearchLanguage, parse_stop_word
portuguese_stopwords = parse_stop_word('\n| source: http://snowball.tartarus.org/algorithms/portuguese/stop.txt\nde             |  of, from\na              |  the; to, at; her\no              |  the; him\nque            |  who, that\ne              |  and\ndo             |  de + o\nda             |  de + a\nem             |  in\num             |  a\npara           |  for\n  | é          from SER\ncom            |  with\nnão            |  not, no\numa            |  a\nos             |  the; them\nno             |  em + o\nse             |  himself etc\nna             |  em + a\npor            |  for\nmais           |  more\nas             |  the; them\ndos            |  de + os\ncomo           |  as, like\nmas            |  but\n  | foi        from SER\nao             |  a + o\nele            |  he\ndas            |  de + as\n  | tem        from TER\nà              |  a + a\nseu            |  his\nsua            |  her\nou             |  or\n  | ser        from SER\nquando         |  when\nmuito          |  much\n  | há         from HAV\nnos            |  em + os; us\njá             |  already, now\n  | está       from EST\neu             |  I\ntambém         |  also\nsó             |  only, just\npelo           |  per + o\npela           |  per + a\naté            |  up to\nisso           |  that\nela            |  he\nentre          |  between\n  | era        from SER\ndepois         |  after\nsem            |  without\nmesmo          |  same\naos            |  a + os\n  | ter        from TER\nseus           |  his\nquem           |  whom\nnas            |  em + as\nme             |  me\nesse           |  that\neles           |  they\n  | estão      from EST\nvocê           |  you\n  | tinha      from TER\n  | foram      from SER\nessa           |  that\nnum            |  em + um\nnem            |  nor\nsuas           |  her\nmeu            |  my\nàs             |  a + as\nminha          |  my\n  | têm        from TER\nnuma           |  em + uma\npelos          |  per + os\nelas           |  they\n  | havia      from HAV\n  | seja       from SER\nqual           |  which\n  | será       from SER\nnós            |  we\n  | tenho      from TER\nlhe            |  to him, her\ndeles          |  of them\nessas          |  those\nesses          |  those\npelas          |  per + as\neste           |  this\n  | fosse      from SER\ndele           |  of him\n\n | other words. There are many contractions such as naquele = em+aquele,\n | mo = me+o, but they are rare.\n | Indefinite article plural forms are also rare.\n\ntu             |  thou\nte             |  thee\nvocês          |  you (plural)\nvos            |  you\nlhes           |  to them\nmeus           |  my\nminhas\nteu            |  thy\ntua\nteus\ntuas\nnosso          | our\nnossa\nnossos\nnossas\n\ndela           |  of her\ndelas          |  of them\n\nesta           |  this\nestes          |  these\nestas          |  these\naquele         |  that\naquela         |  that\naqueles        |  those\naquelas        |  those\nisto           |  this\naquilo         |  that\n\n               | forms of estar, to be (not including the infinitive):\nestou\nestá\nestamos\nestão\nestive\nesteve\nestivemos\nestiveram\nestava\nestávamos\nestavam\nestivera\nestivéramos\nesteja\nestejamos\nestejam\nestivesse\nestivéssemos\nestivessem\nestiver\nestivermos\nestiverem\n\n               | forms of haver, to have (not including the infinitive):\nhei\nhá\nhavemos\nhão\nhouve\nhouvemos\nhouveram\nhouvera\nhouvéramos\nhaja\nhajamos\nhajam\nhouvesse\nhouvéssemos\nhouvessem\nhouver\nhouvermos\nhouverem\nhouverei\nhouverá\nhouveremos\nhouverão\nhouveria\nhouveríamos\nhouveriam\n\n               | forms of ser, to be (not including the infinitive):\nsou\nsomos\nsão\nera\néramos\neram\nfui\nfoi\nfomos\nforam\nfora\nfôramos\nseja\nsejamos\nsejam\nfosse\nfôssemos\nfossem\nfor\nformos\nforem\nserei\nserá\nseremos\nserão\nseria\nseríamos\nseriam\n\n               | forms of ter, to have (not including the infinitive):\ntenho\ntem\ntemos\ntém\ntinha\ntínhamos\ntinham\ntive\nteve\ntivemos\ntiveram\ntivera\ntivéramos\ntenha\ntenhamos\ntenham\ntivesse\ntivéssemos\ntivessem\ntiver\ntivermos\ntiverem\nterei\nterá\nteremos\nterão\nteria\nteríamos\nteriam\n')

class SearchPortuguese(SearchLanguage):
    lang = 'pt'
    language_name = 'Portuguese'
    js_stemmer_rawcode = 'portuguese-stemmer.js'
    stopwords = portuguese_stopwords

    def init(self, options: dict) -> None:
        if False:
            for i in range(10):
                print('nop')
        self.stemmer = snowballstemmer.stemmer('portuguese')

    def stem(self, word: str) -> str:
        if False:
            for i in range(10):
                print('nop')
        return self.stemmer.stemWord(word.lower())