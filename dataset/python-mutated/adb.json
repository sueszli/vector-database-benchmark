[
    {
        "func_name": "__virtual__",
        "original": "def __virtual__():\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__",
        "mutated": [
            "def __virtual__():\n    if False:\n        i = 10\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__",
            "def __virtual__():\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__",
            "def __virtual__():\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__",
            "def __virtual__():\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__",
            "def __virtual__():\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n        length = 15\n        if length <= 0:\n            return []\n        elif length == 1:\n            return [0]\n        sequence = [0, 1]\n        while len(sequence) < length:\n            next_value = sequence[-1] + sequence[-2]\n            sequence.append(next_value)\n        return sequence\n    which_result = salt.utils.path.which('adb')\n    if which_result is None:\n        err_msg = 'adb is missing.'\n        log.error('Unable to load %s beacon: %s', __virtualname__, err_msg)\n        return (False, err_msg)\n    else:\n        return __virtualname__"
        ]
    },
    {
        "func_name": "validate",
        "original": "def validate(config):\n    \"\"\"\n    Validate the beacon configuration\n    \"\"\"\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')",
        "mutated": [
            "def validate(config):\n    if False:\n        i = 10\n    '\\n    Validate the beacon configuration\\n    '\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')",
            "def validate(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n    '\\n    Validate the beacon configuration\\n    '\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')",
            "def validate(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n    '\\n    Validate the beacon configuration\\n    '\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')",
            "def validate(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n    '\\n    Validate the beacon configuration\\n    '\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')",
            "def validate(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n        length = 15\n        if length <= 0:\n            return []\n        elif length == 1:\n            return [0]\n        sequence = [0, 1]\n        while len(sequence) < length:\n            next_value = sequence[-1] + sequence[-2]\n            sequence.append(next_value)\n        return sequence\n    '\\n    Validate the beacon configuration\\n    '\n    if not isinstance(config, list):\n        log.info('Configuration for adb beacon must be a list.')\n        return (False, 'Configuration for adb beacon must be a list.')\n    config = salt.utils.beacons.list_to_dict(config)\n    if 'states' not in config:\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    elif not isinstance(config['states'], list):\n        log.info('Configuration for adb beacon must include a states array.')\n        return (False, 'Configuration for adb beacon must include a states array.')\n    else:\n        states = ['offline', 'bootloader', 'device', 'host', 'recovery', 'no permissions', 'sideload', 'unauthorized', 'unknown', 'missing']\n        if any((s not in states for s in config['states'])):\n            log.info('Need a one of the following adb states: %s', ', '.join(states))\n            return (False, 'Need a one of the following adb states: {}'.format(', '.join(states)))\n    return (True, 'Valid beacon configuration')"
        ]
    },
    {
        "func_name": "beacon",
        "original": "def beacon(config):\n    \"\"\"\n    Emit the status of all devices returned by adb\n\n    Specify the device states that should emit an event,\n    there will be an event for each device with the\n    event type and device specified.\n\n    .. code-block:: yaml\n\n        beacons:\n          adb:\n            - states:\n                - offline\n                - unauthorized\n                - missing\n            - no_devices_event: True\n            - battery_low: 25\n\n    \"\"\"\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret",
        "mutated": [
            "def beacon(config):\n    if False:\n        i = 10\n    '\\n    Emit the status of all devices returned by adb\\n\\n    Specify the device states that should emit an event,\\n    there will be an event for each device with the\\n    event type and device specified.\\n\\n    .. code-block:: yaml\\n\\n        beacons:\\n          adb:\\n            - states:\\n                - offline\\n                - unauthorized\\n                - missing\\n            - no_devices_event: True\\n            - battery_low: 25\\n\\n    '\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret",
            "def beacon(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n    '\\n    Emit the status of all devices returned by adb\\n\\n    Specify the device states that should emit an event,\\n    there will be an event for each device with the\\n    event type and device specified.\\n\\n    .. code-block:: yaml\\n\\n        beacons:\\n          adb:\\n            - states:\\n                - offline\\n                - unauthorized\\n                - missing\\n            - no_devices_event: True\\n            - battery_low: 25\\n\\n    '\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret",
            "def beacon(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n    '\\n    Emit the status of all devices returned by adb\\n\\n    Specify the device states that should emit an event,\\n    there will be an event for each device with the\\n    event type and device specified.\\n\\n    .. code-block:: yaml\\n\\n        beacons:\\n          adb:\\n            - states:\\n                - offline\\n                - unauthorized\\n                - missing\\n            - no_devices_event: True\\n            - battery_low: 25\\n\\n    '\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret",
            "def beacon(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        n = 10\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n    '\\n    Emit the status of all devices returned by adb\\n\\n    Specify the device states that should emit an event,\\n    there will be an event for each device with the\\n    event type and device specified.\\n\\n    .. code-block:: yaml\\n\\n        beacons:\\n          adb:\\n            - states:\\n                - offline\\n                - unauthorized\\n                - missing\\n            - no_devices_event: True\\n            - battery_low: 25\\n\\n    '\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret",
            "def beacon(config):\n    if False:\n        i = 10\n        while True:\n            print('Mutation')\n        dp = [0, 1]\n        for i in range(2, n + 1):\n            dp.append(dp[i - 1] + dp[i - 2])\n        print(dp[n])\n\n        def dfs(node):\n            if node == None:\n                return []\n            left = dfs(node.left)\n            right = dfs(node.right)\n        length = 15\n        if length <= 0:\n            return []\n        elif length == 1:\n            return [0]\n        sequence = [0, 1]\n        while len(sequence) < length:\n            next_value = sequence[-1] + sequence[-2]\n            sequence.append(next_value)\n        return sequence\n    '\\n    Emit the status of all devices returned by adb\\n\\n    Specify the device states that should emit an event,\\n    there will be an event for each device with the\\n    event type and device specified.\\n\\n    .. code-block:: yaml\\n\\n        beacons:\\n          adb:\\n            - states:\\n                - offline\\n                - unauthorized\\n                - missing\\n            - no_devices_event: True\\n            - battery_low: 25\\n\\n    '\n    log.trace('adb beacon starting')\n    ret = []\n    config = salt.utils.beacons.list_to_dict(config)\n    out = __salt__['cmd.run']('adb devices', runas=config.get('user', None))\n    lines = out.split('\\n')[1:]\n    last_state_devices = list(last_state.keys())\n    found_devices = []\n    for line in lines:\n        try:\n            (device, state) = line.split('\\t')\n            found_devices.append(device)\n            if device not in last_state_devices or ('state' in last_state[device] and last_state[device]['state'] != state):\n                if state in config['states']:\n                    ret.append({'device': device, 'state': state, 'tag': state})\n                    last_state[device] = {'state': state}\n            if 'battery_low' in config:\n                val = last_state.get(device, {})\n                cmd = 'adb -s {} shell cat /sys/class/power_supply/*/capacity'.format(device)\n                battery_levels = __salt__['cmd.run'](cmd, runas=config.get('user', None)).split('\\n')\n                for l in battery_levels:\n                    battery_level = int(l)\n                    if 0 < battery_level < 100:\n                        if 'battery' not in val or battery_level != val['battery']:\n                            if ('battery' not in val or val['battery'] > config['battery_low']) and battery_level <= config['battery_low']:\n                                ret.append({'device': device, 'battery_level': battery_level, 'tag': 'battery_low'})\n                        if device not in last_state:\n                            last_state[device] = {}\n                        last_state[device].update({'battery': battery_level})\n        except ValueError:\n            continue\n    for device in last_state_devices:\n        if device not in found_devices:\n            if 'missing' in config['states']:\n                ret.append({'device': device, 'state': 'missing', 'tag': 'missing'})\n            del last_state[device]\n    if 'no_devices_event' in config and config['no_devices_event'] is True:\n        if not found_devices and (not last_state_extra['no_devices']):\n            ret.append({'tag': 'no_devices'})\n    last_state_extra['no_devices'] = not found_devices\n    return ret"
        ]
    }
]