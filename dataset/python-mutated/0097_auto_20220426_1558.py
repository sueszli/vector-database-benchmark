import json
from django.db import migrations
from assets.const import AllTypes
platforms_data_json = '[\n    {\n        "category": "host",\n        "type": "linux",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "Linux",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_posix",\n            "push_account_method": "push_account_posix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "linux",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "Gateway",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_posix",\n            "push_account_method": "push_account_posix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "unix",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "Unix",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_posix",\n            "push_account_method": "push_account_posix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "unix",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "macOS",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_posix",\n            "push_account_method": "push_account_posix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "unix",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "BSD",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_posix",\n            "push_account_method": "push_account_posix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "unix",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": true,\n        "name": "AIX",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "smart"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "posix_ping",\n            "gather_facts_method": "gather_facts_posix",\n            "gather_accounts_method": "gather_accounts_posix",\n            "verify_account_method": "verify_account_posix",\n            "change_secret_method": "change_secret_aix",\n            "push_account_method": "push_account_aix"\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            },\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "windows",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Windows",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_shell_type": "cmd",\n                "ansible_connection": "ssh"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "win_ping",\n            "gather_facts_method": "gather_facts_windows",\n            "gather_accounts_method": "gather_accounts_windows",\n            "verify_account_method": "verify_account_windows",\n            "change_secret_method": "change_secret_local_windows",\n            "push_account_method": "push_account_local_windows"\n        },\n        "protocols": [\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "windows",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Windows-TLS",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_shell_type": "cmd",\n                "ansible_connection": "ssh"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "win_ping",\n            "gather_facts_method": "gather_facts_windows",\n            "gather_accounts_method": "gather_accounts_windows",\n            "verify_account_method": "verify_account_windows",\n            "change_secret_method": "change_secret_local_windows",\n            "push_account_method": "push_account_local_windows"\n        },\n        "protocols": [\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "tls"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "windows",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Windows-RDP",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_shell_type": "cmd",\n                "ansible_connection": "ssh"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "win_ping",\n            "gather_facts_method": "gather_facts_windows",\n            "gather_accounts_method": "gather_accounts_windows",\n            "verify_account_method": "verify_account_windows",\n            "change_secret_method": "change_secret_local_windows",\n            "push_account_method": "push_account_local_windows"\n        },\n        "protocols": [\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "rdp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "vnc",\n                "port": 5900,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "host",\n        "type": "windows",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "RemoteAppHost",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_shell_type": "cmd",\n                "ansible_connection": "ssh"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": true,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "win_ping",\n            "gather_facts_method": "gather_facts_windows",\n            "gather_accounts_method": "gather_accounts_windows",\n            "verify_account_method": "verify_account_windows",\n            "change_secret_method": "change_secret_local_windows",\n            "push_account_method": "push_account_local_windows"\n        },\n        "protocols": [\n            {\n                "name": "rdp",\n                "port": 3389,\n                "setting": {\n                    "console": false,\n                    "security": "any"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "required": true,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "device",\n        "type": "general",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "General",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "device",\n        "type": "general",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Cisco",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "device",\n        "type": "general",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Huawei",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "device",\n        "type": "general",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "H3C",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "ssh",\n                "port": 22,\n                "setting": {\n                    "sftp_enabled": true,\n                    "sftp_home": "/tmp"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            },\n            {\n                "name": "telnet",\n                "port": 23,\n                "required": false,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "mysql",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "MySQL",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "mysql_ping",\n            "gather_accounts_method": "gather_accounts_mysql",\n            "verify_account_method": "verify_account_mysql",\n            "change_secret_method": "change_secret_mysql",\n            "push_account_method": "push_account_mysql"\n        },\n        "protocols": [\n            {\n                "name": "mysql",\n                "port": 3306,\n                "setting": {},\n                "required": false,\n                "primary": true,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "mariadb",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "MariaDB",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "mysql_ping",\n            "gather_accounts_method": "gather_accounts_mysql",\n            "verify_account_method": "verify_account_mysql",\n            "change_secret_method": "change_secret_mysql",\n            "push_account_method": "push_account_mysql"\n        },\n        "protocols": [\n            {\n                "name": "mariadb",\n                "port": 3306,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "postgresql",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "PostgreSQL",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "ping_postgresql",\n            "gather_accounts_method": "gather_accounts_postgresql",\n            "verify_account_method": "verify_account_postgresql",\n            "change_secret_method": "change_secret_postgresql",\n            "push_account_method": "push_account_postgresql"\n        },\n        "protocols": [\n            {\n                "name": "postgresql",\n                "port": 5432,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "oracle",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Oracle",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "oracle_ping",\n            "gather_accounts_method": "gather_accounts_oracle",\n            "verify_account_method": "verify_account_oracle",\n            "change_secret_method": "change_secret_oracle",\n            "push_account_method": "push_account_oracle"\n        },\n        "protocols": [\n            {\n                "name": "oracle",\n                "port": 1521,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "sqlserver",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "SQLServer",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "sqlserver_ping",\n            "verify_account_method": "verify_account_sqlserver",\n            "change_secret_method": "change_secret_sqlserver",\n            "push_account_method": "push_account_sqlserver"\n        },\n        "protocols": [\n            {\n                "name": "sqlserver",\n                "port": 1433,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "clickhouse",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "ClickHouse",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "clickhouse",\n                "port": 9000,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "mongodb",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "MongoDB",\n        "automation": {\n            "ansible_enabled": true,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": true,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": true,\n            "verify_account_enabled": true,\n            "change_secret_enabled": true,\n            "push_account_enabled": true,\n            "ping_method": "mongodb_ping",\n            "gather_accounts_method": "gather_accounts_mongodb",\n            "verify_account_method": "verify_account_mongodb",\n            "change_secret_method": "change_secret_mongodb",\n            "push_account_method": "push_account_mongodb"\n        },\n        "protocols": [\n            {\n                "name": "mongodb",\n                "port": 27017,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "redis",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Redis",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "redis",\n                "port": 6379,\n                "required": false,\n                "setting": {\n                    "auth_username": false\n                },\n                "primary": true,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "database",\n        "type": "redis",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": true,\n        "su_enabled": false,\n        "name": "Redis6+",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {\n                "ansible_connection": "local"\n            },\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "gather_accounts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "redis",\n                "port": 6379,\n                "required": false,\n                "setting": {\n                    "auth_username": true\n                },\n                "primary": true,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "web",\n        "type": "website",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": false,\n        "su_enabled": false,\n        "name": "Website",\n        "automation": {\n            "ansible_enabled": false,\n            "ping_enabled": false,\n            "gather_facts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false,\n            "gather_accounts_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "http",\n                "port": 80,\n                "setting": {\n                    "username_selector": "name=username",\n                    "password_selector": "name=password",\n                    "submit_selector": "id=longin_button"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "cloud",\n        "type": "private",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": false,\n        "su_enabled": false,\n        "name": "Vmware-vSphere",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {},\n            "gather_facts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false,\n            "gather_accounts_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "http",\n                "port": 80,\n                "setting": {\n                    "username_selector": "name=username",\n                    "password_selector": "name=password",\n                    "submit_selector": "id=longin_button"\n                },\n                "primary": true,\n                "required": false,\n                "default": false\n            }\n        ]\n    },\n    {\n        "category": "cloud",\n        "type": "k8s",\n        "internal": true,\n        "charset": "utf-8",\n        "domain_enabled": false,\n        "su_enabled": false,\n        "name": "Kubernetes",\n        "automation": {\n            "ansible_enabled": false,\n            "ansible_config": {},\n            "gather_facts_enabled": false,\n            "verify_account_enabled": false,\n            "change_secret_enabled": false,\n            "push_account_enabled": false,\n            "gather_accounts_enabled": false\n        },\n        "protocols": [\n            {\n                "name": "k8s",\n                "port": 443,\n                "required": false,\n                "primary": true,\n                "default": false,\n                "setting": {}\n            }\n        ]\n    }\n]'

def create_internal_platforms(apps, *args):
    if False:
        while True:
            i = 10
    platform_cls = apps.get_model('assets', 'Platform')
    platforms_data = json.loads(platforms_data_json)
    for platform_data in platforms_data:
        protocols = platform_data.pop('protocols', [])
        platform_data['protocols'] = [p for p in protocols if p.pop('primary', True) is not None]
        AllTypes.create_or_update_by_platform_data(platform_data, platform_cls=platform_cls)

def update_user_platforms(apps, *args):
    if False:
        print('Hello World!')
    platform_cls = apps.get_model('assets', 'Platform')
    AllTypes.update_user_create_platforms(platform_cls)

def migrate_macos_platform(apps, schema_editor):
    if False:
        i = 10
        return i + 15
    db_alias = schema_editor.connection.alias
    asset_model = apps.get_model('assets', 'Asset')
    platform_model = apps.get_model('assets', 'Platform')
    old_macos = platform_model.objects.using(db_alias).filter(name='MacOS', type='macos').first()
    new_macos = platform_model.objects.using(db_alias).filter(name='macOS', type='unix').first()
    if not old_macos or not new_macos:
        return
    asset_model.objects.using(db_alias).filter(platform=old_macos).update(platform=new_macos)
    platform_model.objects.using(db_alias).filter(id=old_macos.id).delete()

def migrate_connectivity(apps, schema_editor):
    if False:
        i = 10
        return i + 15
    db_alias = schema_editor.connection.alias
    asset_model = apps.get_model('assets', 'Asset')
    asset_model.objects.using(db_alias).filter(connectivity='unknown').update(connectivity='-')
    asset_model.objects.using(db_alias).filter(connectivity='failed').update(connectivity='err')

class Migration(migrations.Migration):
    dependencies = [('assets', '0096_auto_20220426_1550')]
    operations = [migrations.RunPython(create_internal_platforms), migrations.RunPython(update_user_platforms), migrations.RunPython(migrate_macos_platform), migrations.RunPython(migrate_connectivity)]