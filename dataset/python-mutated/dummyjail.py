__copyright__ = 'Copyright (c) 2012 Yaroslav Halchenko'
__license__ = 'GPL'
from threading import Lock
from ..server.jail import Jail
from ..server.actions import Actions

class DummyActions(Actions):

    def checkBan(self):
        if False:
            print('Hello World!')
        return self._Actions__checkBan()

class DummyJail(Jail):
    """A simple 'jail' to suck in all the tickets generated by Filter's
	"""

    def __init__(self, name='DummyJail', backend=None):
        if False:
            while True:
                i = 10
        self.lock = Lock()
        self.queue = []
        super(DummyJail, self).__init__(name=name, backend=backend)
        self.__actions = DummyActions(self)

    def __len__(self):
        if False:
            print('Hello World!')
        with self.lock:
            return len(self.queue)

    def isEmpty(self):
        if False:
            i = 10
            return i + 15
        with self.lock:
            return not self.queue

    def isFilled(self):
        if False:
            print('Hello World!')
        with self.lock:
            return bool(self.queue)

    @property
    def hasFailTickets(self):
        if False:
            print('Hello World!')
        return bool(self.queue)

    def putFailTicket(self, ticket):
        if False:
            return 10
        with self.lock:
            self.queue.append(ticket)

    def getFailTicket(self):
        if False:
            print('Hello World!')
        with self.lock:
            try:
                return self.queue.pop()
            except IndexError:
                return False

    @property
    def idle(self):
        if False:
            for i in range(10):
                print('nop')
        return False

    @idle.setter
    def idle(self, value):
        if False:
            print('Hello World!')
        pass

    @property
    def actions(self):
        if False:
            while True:
                i = 10
        return self.__actions

    def isAlive(self):
        if False:
            print('Hello World!')
        return True