from saleor.graphql.tests.utils import get_graphql_content
CHECKOUT_CREATE_FROM_ORDER_MUTATION = '\nmutation CheckoutCreateFromOrder( $id: ID!){\n  checkoutCreateFromOrder(id: $id){\n    errors{\n      field\n      message\n      code\n    }\n    unavailableVariants{\n      lineId\n      variantId\n      code\n      message\n    }\n    checkout{\n      id\n      email\n      totalPrice{\n          gross{\n            amount\n            currency\n          }\n          net{\n            amount\n            currency\n          }\n          tax{\n            amount\n            currency\n          }\n        }\n      user{\n        id\n      }\n      lines{\n        variant{\n          id\n          name\n          product{\n            id\n            name\n          }\n        }\n        quantity\n        totalPrice{\n          gross{\n            amount\n            currency\n          }\n          net{\n            amount\n            currency\n          }\n          tax{\n            amount\n            currency\n          }\n        }\n      }\n      metadata{\n        key\n        value\n      }\n      shippingPrice{\n          gross{\n            amount\n            currency\n          }\n          net{\n            amount\n            currency\n          }\n          tax{\n            amount\n            currency\n          }\n        }\n      shippingAddress{\n        country{\n          code\n        }\n        countryArea\n        streetAddress1\n        streetAddress2\n        postalCode\n        city\n        firstName\n        lastName\n      }\n      billingAddress{\n        country{\n          code\n        }\n        countryArea\n        streetAddress1\n        streetAddress2\n        postalCode\n        city\n        firstName\n        lastName\n      }\n      shippingMethods{\n        id\n        name\n      }\n    }\n  }\n}\n'

def checkout_create_from_order(api_client, order_id):
    if False:
        print('Hello World!')
    variables = {'id': order_id}
    response = api_client.post_graphql(CHECKOUT_CREATE_FROM_ORDER_MUTATION, variables=variables)
    content = get_graphql_content(response)
    checkout_data = content['data']['checkoutCreateFromOrder']
    return checkout_data